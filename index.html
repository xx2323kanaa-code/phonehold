<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<title>Right Hand Phone Hold</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
html,body{
  margin:0;
  padding:0;
  background:#000;
  width:100%;
  height:100%;
}
body{
  display:flex;
  justify-content:center;
  align-items:center;
}

svg{
  width:100vw;
  max-width:420px;
  height:auto;
}

.palm{
  fill:rgba(255,255,0,0.25);
  stroke:yellow;
  stroke-width:6;
}

.finger,.thumb,.wrist{
  stroke:yellow;
  stroke-width:5;
  stroke-linecap:round;
}

.nail{ fill:yellow; }

.phone{
  fill:#1e6cff;
  rx:10;
  ry:10;
  opacity:0;
}

.label{
  fill:#aaa;
  font-size:12px;
  text-anchor:middle;
}
</style>
</head>

<body>

<svg viewBox="0 0 360 360">

  <!-- ケータイ（固定） -->
  <rect id="phone" class="phone" x="160" y="150" width="60" height="100"/>

  <!-- 手全体 -->
  <g id="hand">

    <!-- 手首 -->
    <line x1="165" y1="300" x2="165" y2="260" class="wrist"/>
    <line x1="195" y1="300" x2="195" y2="260" class="wrist"/>

    <!-- 手の甲 -->
    <rect x="120" y="200" width="120" height="60" rx="20" class="palm"/>

    <!-- 指（右手・背側） -->
    <line id="little" class="finger"/>
    <line id="ring"   class="finger"/>
    <line id="middle" class="finger"/>
    <line id="index"  class="finger"/>
    <line id="thumb"  class="thumb"/>

    <!-- 爪 -->
    <polygon id="n_little" class="nail"/>
    <polygon id="n_ring"   class="nail"/>
    <polygon id="n_middle" class="nail"/>
    <polygon id="n_index"  class="nail"/>
    <polygon id="n_thumb"  class="nail"/>
  </g>

  <text id="label" x="180" y="40" class="label">RELAX</text>
</svg>

<script>
/* ===== 定数 ===== */
const baseY = 200;

/* 指（右手・背側） */
const fingers = {
  little:{ x:135, relax:60, hold:30, lock:25, mini:35 },
  ring:{   x:155, relax:70, hold:32, lock:27, mini:37 },
  middle:{ x:175, relax:75, hold:38, lock:32, mini:42 },
  index:{  x:195, relax:75, hold:34, lock:28, mini:38 }
};

/* 親指 */
const thumb = {
  x1:240,y1:235,
  relax:{ x2:270,y2:200 },
  hold:{  x2:215,y2:215 }
};

const states = ["RELAX","HOLD","LOCK","MINI","RELAX"];
let stateIndex = 0;

const label = document.getElementById("label");
const phone = document.getElementById("phone");
const hand  = document.getElementById("hand");

/* 爪 */
function nail(id,x,y){
  const s=6;
  document.getElementById(id)
    .setAttribute("points",`${x-s},${y} ${x+s},${y} ${x},${y-s}`);
}

/* 状態反映 */
function applyState(){
  const state = states[stateIndex];
  label.textContent = state;

  // ケータイ
  phone.style.opacity = (state==="RELAX") ? 0 : 1;

  // 手首回旋
  if(state==="HOLD"){
    hand.setAttribute("transform","rotate(15 180 260)");
  }
  if(state==="RELAX"){
    hand.setAttribute("transform","");
  }

  // 指
  for(const id in fingers){
    const f = fingers[id];
    let len = f.relax;
    if(state==="HOLD") len=f.hold;
    if(state==="LOCK") len=f.lock;
    if(state==="MINI") len=f.mini;

    const x=f.x;
    const y2=baseY-len;

    const el=document.getElementById(id);
    el.setAttribute("x1",x);
    el.setAttribute("y1",baseY);
    el.setAttribute("x2",x);
    el.setAttribute("y2",y2);

    const n=document.getElementById("n_"+id);
    if(state==="RELAX"){
      nail("n_"+id,x,y2);
      n.style.opacity=1;
    }else{
      n.style.opacity=0;
    }
  }

  // 親指
  const th=document.getElementById("thumb");
  const pos = (state==="RELAX") ? thumb.relax : thumb.hold;
  th.setAttribute("x1",thumb.x1);
  th.setAttribute("y1",thumb.y1);
  th.setAttribute("x2",pos.x2);
  th.setAttribute("y2",pos.y2);

  const nt=document.getElementById("n_thumb");
  if(state==="RELAX"){
    nail("n_thumb",pos.x2,pos.y2);
    nt.style.opacity=1;
  }else{
    nt.style.opacity=0;
  }
}

/* ループ */
setInterval(()=>{
  stateIndex = (stateIndex+1) % states.length;
  applyState();
},3000);

applyState();
</script>

</body>
</html>
